{% extends "base.html" %}

{% block title %}Pacientes - DentistFlow{% endblock %}

{% block content %}
    
    <div class="header">
        <div>
            <h1>Meus Pacientes</h1>
            <p style="color: var(--text-gray);">Gerencie o cadastro completo dos seus clientes.</p>
        </div>
    </div>

    <div class="split-layout">
        
        <div class="card-box">
            <h2 style="font-size: 1.1rem; margin-bottom: 20px; color: var(--text-dark);">
                <i class="ph ph-user-plus" style="color: var(--primary-color);"></i> Novo Paciente
            </h2>
            
            <form action="{{ url_for('patients.create') }}" method="POST">
                
                <div class="form-group">
                    <label for="name" class="form-label">Nome Completo</label>
                    <input type="text" name="name" id="name" class="form-input" required placeholder="Ex: Maria Oliveira">
                </div>

                <div class="form-group">
                    <label for="phone" class="form-label">Telefone / WhatsApp</label>
                    <input type="text" name="phone" id="phone" class="form-input" placeholder="(00) 00000-0000">
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">E-mail</label>
                    <input type="email" name="email" id="email" class="form-input" placeholder="cliente@email.com">
                </div>

                <div class="form-group">
                    <label for="cpf" class="form-label">CPF (Opcional)</label>
                    <input type="text" name="cpf" id="cpf" class="form-input" placeholder="000.000.000-00">
                </div>

                <button type="submit" class="btn-primary btn-block">
                    Cadastrar Paciente
                </button>
            </form>
        </div>

        <div class="card-box" style="flex: 1;">
            <div class="section-header">
                <h2 style="font-size: 1.1rem;">Base de Pacientes</h2>
                <span style="background: var(--secondary-color); padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">
                    {{ patients|length }} Cadastrados
                </span>
            </div>

            <table>
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Telefone</th>
                        <th>E-mail</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    {% for patient in patients %}
                    <tr>
                        <td style="font-weight: 500;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <div style="width: 30px; height: 30px; background: #E2E8F0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--text-gray);">
                                    <i class="ph ph-user"></i>
                                </div>
                                {{ patient.name }}
                            </div>
                        </td>
                        <td>{{ patient.phone or "-" }}</td>
                        <td style="color: var(--text-gray); font-size: 0.9rem;">{{ patient.email or "-" }}</td>
                        <td>
                            <button class="action-btn" title="Histórico"><i class="ph ph-clock-counter-clockwise"></i></button>
                            <button class="action-btn" title="Editar"><i class="ph ph-pencil-simple"></i></button>
                        </td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" style="text-align: center; padding: 40px; color: var(--text-gray);">
                            <i class="ph ph-users-three" style="font-size: 2rem; margin-bottom: 10px; display: block;"></i>
                            Nenhum paciente cadastrado ainda.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </div>

{% endblock %}